<div class="conversation_details" *ngIf="conversation">
    <div class="conversation_chat">
        <div class="conversation_chat_header">
            <div class="conversation_preview_title_and_address">
                <span class="subject">{{conversation.subject}}</span>
                <span class="address">{{conversation.address}} (<ng-container *ngFor="let user of conversation.users; let lastUser = last">
                    <span *ngIf="!user.is_current_user">{{ user.fullname }}</span>
                    <span *ngIf="!user.is_current_user && !lastUser">, </span>
                </ng-container>)
                </span>
            </div>
            <div class="conversation_chat_header_menu">
                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="menu">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu" xPosition="before">
                    <button mat-menu-item>See info</button>
                    <button mat-menu-item>Mark unread</button>
                    <button mat-menu-item>Archive conversation</button>
                    <button mat-menu-item>Mute conversation</button>
                </mat-menu>
            </div>
        </div>
        <app-conversation-chatbox
                [conversation]="conversation"
                class="conversation_chat_body"
                ></app-conversation-chatbox>
    </div>
    <div class="conversation_info">
        <h3>Info:</h3>
        <p>{{ conversation.address }}</p>
        <ul>
          <ng-container *ngFor="let user of conversation.users">
            <li *ngIf="!user.is_current_user">
                <img src="{{ user.photo }}" alt="{{ user.fullname }}">
                <p>{{ user.fullname }}</p>
                <p>{{ user.email }}</p>
                <p>{{ user.description }}</p>
            </li>
          </ng-container>
        </ul>
    </div>
  </div>
